{
  "events": [
    {
      "operationId": "",
      "path": "room:join",
      "event": "room:join",
      "namespace": "/room",
      "tags": ["Socket.IO Events - Room"],
      "description": "방에 참여합니다.\n\n**사용법:**\n```javascript\nsocket.emit('room:join', {\n  roomId: 'room-uuid',\n  user: { userId: 'user-123', name: '홍길동' }\n})\n```\n\n**네임스페이스:** /room\n**응답 이벤트:** room:joined (본인에게), participant:connected (방의 다른 참여자들에게 브로드캐스트, socketId/userId/name 포함)",
      "request": {
        "type": "object",
        "required": ["roomId", "user"],
        "properties": {
          "roomId": {
            "type": "string",
            "description": "참여할 방의 고유 ID (UUID)",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "user": {
            "type": "object",
            "required": ["userId", "name"],
            "properties": {
              "userId": {
                "type": "string",
                "description": "사용자 고유 ID",
                "example": "user-123"
              },
              "name": {
                "type": "string",
                "description": "사용자 표시 이름",
                "example": "홍길동"
              }
            }
          }
        }
      },
      "response": {
        "type": "object",
        "description": "방 참여 성공 시 전체 방 상태 (room:joined 이벤트)",
        "required": ["roomId", "participants", "categories", "ownerId"],
        "properties": {
          "roomId": {
            "type": "string",
            "description": "참여한 방의 ID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "participants": {
            "type": "array",
            "description": "현재 방에 참여 중인 모든 사용자 목록",
            "items": {
              "type": "object",
              "properties": {
                "socketId": { "type": "string", "description": "소켓 연결 ID", "example": "abc123def456" },
                "userId": { "type": "string", "example": "user-123" },
                "name": { "type": "string", "example": "홍길동" }
              }
            }
          },
          "categories": {
            "type": "array",
            "description": "방의 카테고리 목록",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string", "description": "카테고리 UUID" },
                "roomId": { "type": "string" },
                "title": { "type": "string", "example": "할 일" },
                "orderIndex": { "type": "number", "example": 0 },
                "createdAt": { "type": "string", "format": "date-time" }
              }
            }
          },
          "ownerId": {
            "type": "string",
            "description": "방 소유자의 userId",
            "example": "user-123"
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "room:leave",
      "event": "room:leave",
      "namespace": "/room",
      "tags": ["Socket.IO Events - Room"],
      "description": "현재 참여 중인 방에서 나갑니다.\n\n**사용법:**\n```javascript\nsocket.emit('room:leave')\n```\n\n**네임스페이스:** /room\n**세션 필요:** 세션에서 roomId를 조회하므로 별도 payload 불필요\n**응답 이벤트:** participant:disconnected (방의 다른 참여자들에게 브로드캐스트)",
      "request": {
        "type": "object",
        "description": "요청 페이로드 없음 (세션에서 자동 조회)"
      },
      "response": {
        "type": "object",
        "description": "나간 사용자 정보를 다른 참여자들에게 전송 (participant:disconnected 이벤트)",
        "required": ["socketId", "userId"],
        "properties": {
          "socketId": {
            "type": "string",
            "description": "나간 사용자의 소켓 연결 ID",
            "example": "abc123def456"
          },
          "userId": {
            "type": "string",
            "description": "방을 나간 사용자의 ID",
            "example": "user-123"
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "participant:update_name",
      "event": "participant:update_name",
      "namespace": "/room",
      "tags": ["Socket.IO Events - Room"],
      "description": "참여자의 표시 이름을 변경합니다.\n\n**사용법:**\n```javascript\nsocket.emit('participant:update_name', { name: '새이름' })\n```\n\n**네임스페이스:** /room\n**응답 이벤트:** participant:name_updated (방의 모든 참여자들에게 브로드캐스트)",
      "request": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "변경할 새 이름 (1-20자)",
            "minLength": 1,
            "maxLength": 20,
            "example": "김철수"
          }
        }
      },
      "response": {
        "type": "object",
        "description": "이름 변경 알림 (participant:name_updated 이벤트)",
        "required": ["userId", "name"],
        "properties": {
          "userId": {
            "type": "string",
            "description": "이름을 변경한 사용자 ID",
            "example": "user-123"
          },
          "name": {
            "type": "string",
            "description": "변경된 새 이름",
            "example": "김철수"
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "room:transfer_owner",
      "event": "room:transfer_owner",
      "namespace": "/room",
      "tags": ["Socket.IO Events - Room"],
      "description": "방 소유권을 다른 참여자에게 이전합니다.\n\n**사용법:**\n```javascript\nsocket.emit('room:transfer_owner', { targetUserId: 'user-456' })\n```\n\n**네임스페이스:** /room\n**권한:** 현재 방 소유자만 실행 가능\n**응답 이벤트:** room:owner_transferred (방의 모든 참여자들에게 브로드캐스트)",
      "request": {
        "type": "object",
        "required": ["targetUserId"],
        "properties": {
          "targetUserId": {
            "type": "string",
            "description": "소유권을 받을 대상 사용자 ID",
            "example": "user-456"
          }
        }
      },
      "response": {
        "type": "object",
        "description": "소유권 이전 알림 (room:owner_transferred 이벤트)",
        "required": ["previousOwnerId", "newOwnerId"],
        "properties": {
          "previousOwnerId": {
            "type": "string",
            "description": "이전 소유자 ID",
            "example": "user-123"
          },
          "newOwnerId": {
            "type": "string",
            "description": "새 소유자 ID",
            "example": "user-456"
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "category:create",
      "event": "category:create",
      "namespace": "/room",
      "tags": ["Socket.IO Events - Category"],
      "description": "새 카테고리를 생성합니다.\n\n**사용법:**\n```javascript\nsocket.emit('category:create', { name: '진행 중' })\n```\n\n**네임스페이스:** /room\n**응답 이벤트:** category:created (방의 모든 참여자들에게 브로드캐스트)",
      "request": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "카테고리 이름 (1-100자)",
            "minLength": 1,
            "maxLength": 100,
            "example": "진행 중"
          }
        }
      },
      "response": {
        "type": "object",
        "description": "생성된 카테고리 정보 (category:created 이벤트)",
        "required": ["categoryId", "name"],
        "properties": {
          "categoryId": {
            "type": "string",
            "description": "생성된 카테고리의 UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "카테고리 이름",
            "example": "진행 중"
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "category:delete",
      "event": "category:delete",
      "namespace": "/room",
      "tags": ["Socket.IO Events - Category"],
      "description": "카테고리를 삭제합니다.\n\n**사용법:**\n```javascript\nsocket.emit('category:delete', { categoryId: 'cat-uuid' })\n```\n\n**네임스페이스:** /room\n**응답 이벤트:** category:deleted (방의 모든 참여자들에게 브로드캐스트)",
      "request": {
        "type": "object",
        "required": ["categoryId"],
        "properties": {
          "categoryId": {
            "type": "string",
            "description": "삭제할 카테고리 UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          }
        }
      },
      "response": {
        "type": "object",
        "description": "삭제된 카테고리 정보 (category:deleted 이벤트)",
        "required": ["categoryId"],
        "properties": {
          "categoryId": {
            "type": "string",
            "description": "삭제된 카테고리 UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "canvas:attach",
      "event": "canvas:attach",
      "namespace": "/canvas",
      "tags": ["Socket.IO Events - Canvas"],
      "description": "캔버스에 참여하여 Yjs 문서를 초기화합니다.\n\n**사용법:**\n```javascript\nsocket.emit('canvas:attach', {\n  roomId: 'room-uuid',\n  canvasId: 'cat-uuid'\n})\n```\n\n**네임스페이스:** /canvas\n**응답 이벤트:** canvas:attached (본인에게만)",
      "request": {
        "type": "object",
        "required": ["roomId", "canvasId"],
        "properties": {
          "roomId": {
            "type": "string",
            "description": "방 UUID",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "canvasId": {
            "type": "string",
            "description": "캔버스(카테고리) UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          }
        }
      },
      "response": {
        "type": "object",
        "description": "초기 동기화 데이터 (canvas:attached 이벤트)",
        "required": ["docKey"],
        "properties": {
          "docKey": {
            "type": "string",
            "description": "Yjs 문서 키",
            "example": "canvas:cat-550e8400"
          },
          "update": {
            "type": "array",
            "description": "초기 Yjs 상태 (Uint8Array를 number[]로 직렬화)",
            "items": { "type": "number" },
            "nullable": true
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "canvas:detach",
      "event": "canvas:detach",
      "namespace": "/canvas",
      "tags": ["Socket.IO Events - Canvas"],
      "description": "캔버스에서 나갑니다.\n\n**사용법:**\n```javascript\nsocket.emit('canvas:detach', { canvasId: 'cat-uuid' })\n```\n\n**네임스페이스:** /canvas\n**응답 이벤트:** canvas:detached (본인에게만)",
      "request": {
        "type": "object",
        "required": ["canvasId"],
        "properties": {
          "canvasId": {
            "type": "string",
            "description": "나갈 캔버스(카테고리) UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          }
        }
      },
      "response": {
        "type": "object",
        "description": "빈 응답 (canvas:detached 이벤트)"
      }
    },
    {
      "operationId": "",
      "path": "y:update",
      "event": "y:update",
      "namespace": "/canvas",
      "tags": ["Socket.IO Events - Yjs"],
      "description": "Yjs 문서 업데이트를 서버로 전송하고 다른 클라이언트들에게 브로드캐스트합니다.\n\n**사용법:**\n```javascript\ndoc.on('update', (update, origin) => {\n  if (origin !== socket) {\n    socket.emit('y:update', {\n      canvasId: 'cat-uuid',\n      update: Array.from(update)\n    })\n  }\n})\n```\n\n**네임스페이스:** /canvas\n**응답 이벤트:** y:update (같은 캔버스의 다른 클라이언트들에게 브로드캐스트)\n**부가 효과:** 서버에서 5초마다 배치로 DB 저장",
      "request": {
        "type": "object",
        "required": ["canvasId", "update"],
        "properties": {
          "canvasId": {
            "type": "string",
            "description": "업데이트가 발생한 캔버스 UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          },
          "update": {
            "type": "array",
            "description": "Yjs update (Uint8Array를 number[]로 직렬화)",
            "items": { "type": "number" },
            "example": [1, 2, 3, 4, 5]
          }
        }
      },
      "response": {
        "type": "object",
        "description": "동일한 업데이트를 다른 클라이언트들에게 브로드캐스트 (y:update 이벤트)",
        "required": ["canvasId", "update"],
        "properties": {
          "canvasId": {
            "type": "string",
            "description": "업데이트가 발생한 캔버스 UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          },
          "update": {
            "type": "array",
            "description": "Yjs update (number[])",
            "items": { "type": "number" }
          }
        }
      }
    },
    {
      "operationId": "",
      "path": "y:awareness",
      "event": "y:awareness",
      "namespace": "/canvas",
      "tags": ["Socket.IO Events - Yjs"],
      "description": "사용자의 커서 위치 등 일시적인 상태를 다른 참여자들에게 브로드캐스트합니다. (DB에 저장하지 않음)\n\n**사용법:**\n```javascript\nsocket.emit('y:awareness', {\n  canvasId: 'cat-uuid',\n  state: {\n    cursor: { x: 100, y: 200 }\n  }\n})\n```\n\n**네임스페이스:** /canvas\n**응답 이벤트:** y:awareness (같은 캔버스의 다른 클라이언트들에게 브로드캐스트)\n**특징:** 서버 메모리/DB에 저장하지 않음 (일시적 상태)",
      "request": {
        "type": "object",
        "required": ["canvasId", "state"],
        "properties": {
          "canvasId": {
            "type": "string",
            "description": "상태 업데이트가 발생한 캔버스 UUID",
            "example": "cat-550e8400-e29b-41d4-a716-446655440000"
          },
          "state": {
            "type": "object",
            "properties": {
              "cursor": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "x": { "type": "number", "example": 100 },
                  "y": { "type": "number", "example": 200 },
                  "timestamp": { "type": "number", "description": "타임스탬프 (ms)", "nullable": true }
                }
              }
            }
          }
        }
      },
      "response": {
        "type": "object",
        "description": "다른 클라이언트들에게 커서 위치 브로드캐스트 (y:awareness 이벤트)",
        "required": ["socketId", "state"],
        "properties": {
          "socketId": {
            "type": "string",
            "description": "상태를 보낸 클라이언트의 소켓 ID",
            "example": "abc123def456"
          },
          "state": {
            "type": "object",
            "properties": {
              "cursor": {
                "type": "object",
                "nullable": true,
                "properties": {
                  "x": { "type": "number", "example": 100 },
                  "y": { "type": "number", "example": 200 },
                  "timestamp": { "type": "number", "nullable": true }
                }
              }
            }
          }
        }
      }
    }
  ]
}
